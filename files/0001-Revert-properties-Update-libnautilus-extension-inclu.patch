From 4fb75b856aef7e0b636c132ae39b8461ae5190cd Mon Sep 17 00:00:00 2001
From: Joshua Strobl <joshua@streambits.io>
Date: Thu, 12 Mar 2020 00:16:11 +0200
Subject: [PATCH 1/1] Revert "properties: Update libnautilus-extension
 includes"

This reverts commit 66a7927b42640f58ca0d3e6a9ebb64270f97ef08.
---
 configure.ac                    | 2 +-
 meson.build                     | 2 +-
 properties/ev-properties-main.c | 3 ++-
 3 files changed, 4 insertions(+), 3 deletions(-)

diff --git a/configure.ac b/configure.ac
index 95be9101..38dbd0d2 100644
--- a/configure.ac
+++ b/configure.ac
@@ -128,7 +128,7 @@ CAIRO_REQUIRED=1.10.0
 GLIB_REQUIRED=2.38.0
 LIBSECRET_REQUIRED=0.5
 GTK_REQUIRED=3.22.0
-NAUTILUS_REQUIRED=3.28.0
+NAUTILUS_REQUIRED=2.91.4
 GDK_PIXBUF_REQUIRED=2.36.5
 GSPELL_REQUIRED=1.6.0
 SYNCTEX_REQUIRED=1.19
diff --git a/meson.build b/meson.build
index 314e3a3f..78dbf075 100644
--- a/meson.build
+++ b/meson.build
@@ -174,7 +174,7 @@ if ev_platform == 'gnome'
   # *** Nautilus property page build ***
   enable_nautilus = get_option('nautilus')
   if enable_nautilus
-    libnautilus_extension_dep = dependency('libnautilus-extension', version: '>= 3.28.0')
+    libnautilus_extension_dep = dependency('libnautilus-extension', version: '>= 2.91.4')
     nautilus_extension_dir = libnautilus_extension_dep.get_pkgconfig_variable('extensiondir', define_variable: ['libdir', ev_libdir])
   endif
 
diff --git a/properties/ev-properties-main.c b/properties/ev-properties-main.c
index 9aacdf28..261268f8 100644
--- a/properties/ev-properties-main.c
+++ b/properties/ev-properties-main.c
@@ -34,7 +34,8 @@
 #include <glib/gi18n-lib.h>
 #include <gtk/gtk.h>
 
-#include <nautilus-extension.h>
+#include <libnautilus-extension/nautilus-extension-types.h>
+#include <libnautilus-extension/nautilus-property-page-provider.h>
 
 #include <evince-document.h>
 #include "ev-properties-view.h"
-- 
2.25.1

